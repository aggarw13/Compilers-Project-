rm -rf build
mkdir build
java -cp lib/antlr.jar org.antlr.v4.Tool -o build Micro.g4
rm -rf classes
mkdir classes
javac -cp lib/antlr.jar -d classes src/*.java build/*.java
java -cp lib/antlr-4.5.1-complete.jar:classes/ Micro ../step6/input/fma.micro 
;IR Code
;LABEL add
;LINK
;ADDF $P1 $P2 $T0
;STOREF $T0 $L1
;STOREF $L1 $T1
;STOREF $T1 $R
;RET

;LABEL multiply
;LINK
;MULTF $P1 $P2 $T0
;STOREF $T0 $L1
;STOREI $L1 $T1
;STOREI $T1 $R
;RET

;LABEL main
;LINK
;WRITES intro
;WRITES first
;READF $L1
;WRITES second
;READF $L2
;WRITES third
;READF $L3
;PUSH
;PUSH $L1
;PUSH $L2
;JSR multiply
;POP
;POP
;POP $T0
;STOREI $T0 $L5
;PUSH
;PUSH $L5
;PUSH $L3
;JSR add
;POP
;POP
;POP $T1
;STOREI $T1 $L4
;WRITEF $L1
;WRITES star
;WRITEF $L2
;WRITES plus
;WRITEF $L3
;WRITES equal
;WRITEF $L4
;WRITES eol
;STOREI 0 $R
;RET
